<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>chat-widget</title>
  </head>
  <body>
    <button onclick="if (window.FMX22 && window.ChatWidget) { window.ChatWidget.clearData(window.FMX22.chat.settings.id); window.location.reload()}">Очистить данные чата и обновить страницу</button>
    <button onclick="window.FMX22 && window.FMX22.win && window.FMX22.win.orderCall && window.FMX22.win.orderCall.show()">Окно обратного звонка</button>
    <a href="tel:+78043337889" title="Позвонить бесплатно"><strong><span>8-804-333-75-89</span></strong></a>
    <a href="./docs/public/">Документация</a>
    <div id="chat-widget"></div>
    <script>
      // загрузка скрипта и создание виджета
      function addWidget () {
        const chws = document.createElement('script')
        chws.src = 'https://cdn.rnsb.su:1443/nsb-widget/chat-widget.js'
        chws.onload = () => {
          const chw = document.createElement('div')
          chw.id = 'chat-widget'
          document.body.append(chw)
          // ниже 'id' - id виджета; 'source' - идентификатор источника размещения
          window.ChatWidget.createWidget(1, 2)
        }
        chws.onerror = e => console.log('Ошибка при загрузке виджета чата')
        document.head.append(chws)
      }

      addEventListener("DOMContentLoaded", addWidget)
    </script>
  </body>
</html>
