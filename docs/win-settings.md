# Настройки окон

Настройки окон обратного звонка устанавливаются в разделе `win_settings` настроек виджета.  
Они разделяются на два вида, но имеют одинаковую структуру:  
Основное окно `order_call` может быть только одно.  
Дополнительные окна `promo` может быть несколько.

## Структура настроек окна

 ```json
{
  "handle": "order_call",
  "show": {
    "initial": 0,
    "on_exit": 0,
    "no_action": 0,
    "ses_count": 1,
    "glob_count": 3
  },
  "text": {
    "h1": "У Вас остались вопросы?",
    "h2": "Закажите бесплатный обратный звонок",
    "phone_button": "Жду звонка!",
    "phone_error": "Проверьте, что Вы ввели правильный номер!",
    "feedback": "Мы перезвоним Вам в ближайшее время на номер {{PHONE}}"
  }
}
```
## handle

уникальное имя окна

## show

настройки показа окна

```json
"show": {
    "initial": 0,
    "on_exit": 0,
    "no_action": 0,
    "ses_count": 1,
    "glob_count": 3
  }
```

`initial` - время через которое показывать окно при открытии страницы  
`on_exit` - время через которое устанавливать функцию отслеживания движении мыши за пределы страницы. Например при движении мыши к кнопке закрытия вкладки браузера. При этом будет показано окно.  
`no_action` - время через которое показывать окно, если не было кликов на странице.  
`ses_count` - ограничение на показ окон по количеству показов в одной сессии. Например, если установлено `1` то окно будет показано только один раз. Но если закрыть вкладку браузера или браузер и открыть страницу снова, лимит сбрасывается, и окно может быть снова показано один раз.  
`glob_count` - ограничение на показ окон по количеству показов для текущего браузера. Закрытие браузера не сбрасывает этот лимит. При достижении лимита он может быть сброшен только вручную в настройках браузера или очисткой LocalStorage.


## text

Настройки текста для окна

```json
"text": {
        "h1": "У Вас остались вопросы?",
        "h2": "Закажите бесплатный обратный звонок",
        "phone_button": "Жду звонка!",
        "phone_error": "Проверьте, что Вы ввели правильный номер!",
        "feedback": "Мы перезвоним Вам в ближайшее время на номер {{PHONE}}"
      }

```
`h1` - заголовок окна  
`h2` - Подзаголовок окна  
`phone_button` - текст основной кнопки заказа обратного звонка.    
`feedback` - Текст, который будет показан после заказа звонка. Здесь комбинация <span>{</span><span>{</span>PHONE<span>}}</span> в любом месте этого текста будет заменена на номер, который ввёл пользователь.

## order_call

Основное окно  
Настройки по умолчанию

```json
{
  "win_settings": {
    "order_call": {
      "handle": "order_call",
      "show": {
        "initial": 0,
        "on_exit": 0,
        "no_action": 0,
        "ses_count": 1,
        "glob_count": 3
      },
      "text": {
        "h1": "У Вас остались вопросы?",
        "h2": "Закажите бесплатный обратный звонок",
        "phone_button": "Жду звонка!",
        "phone_error": "Проверьте, что Вы ввели правильный номер!",
        "feedback": "Мы перезвоним Вам в ближайшее время на номер {{PHONE}}"
      }
    }
  }  
}
```
Пример: показать окно с настройками по умолчанию через 30сек после открытия страницы.

```json
{
  "win_settings": {
    "order_call": {
      "show": {
        "initial": 30000
      }
    }
  }  
}
```
 
## promo

Дополнительные окна заказа обратного звонка. Например с предложением скидки и т.п.
Имеют те же настройки как `order_call`, только добавляются в массив `promo` через запятую с уникальным свойством `handle`.

```json
{
  "win_settings": {
    "promo": []
  }
}

```

Пример: Добавить два окна с разными заголовками и настройками показа.  
Первое появится через 5сек после открытия страницы, второе через 20сек бездействия пользователя.

```json
{
  "win_settings": {
    "promo": [
      
      {
        "handle": "win 1",
        "show": {
          "initial": 5000
        },
        "text": {
          "h1": "Это окно 1"
        }
      },

      {
        "handle": "win 2",
        "show": {
          "no_action": 20000
        },
        "text": {
          "h1": "Это окно 2"
        }
      }
      
    ]
  }
}

```
