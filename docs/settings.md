# Настройки

Настройки записываются в формате `JSON` и состоят из нескольких разделов: Чат, Окна, Телефония и др. 

Для изменения какой-либо настройки нужно добавить только её название и значение в соответствующий раздел.
Остальные настройки, которые не установлены будут заменены значениями по умолчанию.

## Добавление настроек

Настройки удобно записывать в файл JSON или [онлайн редактор JSON](https://tools.icoder.uz/json-validator.php), где можно также проверить файл на ошибки.  
Скопируйте весь JSON настроек ниже на этой странице, вставьте в файл или онлайн редактор и измените необходимые значения.

* Зайдите в [админ панель](https://api.rnsb.su/admin/) и нажмите "Виджеты" в левом меню 
* В списке виджетов нажмите на номер нужного вам виджета
* В разделе "Данные" удалите старые настройки и вставьте ваши новые настройки.
* Нажмите "Сохранить"


## Обновление настроек

Настройки сохраняются в браузере в текущей сессии. Если настройки были изменены необходимо закрыть вкладку или окно браузера с виджетом и открыть заново.  
Исключение: если закрыть браузер со вкладкой виджета, но браузер настроен восстанавливать вкладки при открытии - обновления не произойдёт. Необходимо именно закрыть саму вкладку с виджетом.

## Все настройки

Полный объект настроек со значениями по умолчанию. Время указывается в миллисекундах 1000мс = 1сек.

```json
{
  "chat_settings": {
    "visible": false,
    "buttons": [],
    "logo": {
      "src": "",
      "width": "0",
      "height": "0"
    },
    "text": {
      "header": "Всегда рады ответить на Ваши вопросы!",
      "welcome_message": "Здравствуйте!",
      "input_placeholder": "Напишите что-нибудь"
    },
    "toggle_button_visible": {
      "initial": true,
      "initial_delay": 0,
      "show_with_chat": false,
      "hide_with_chat": false
    },
    "initial_show_delay": 0,
    "history_limit": 20,
    "no_answer_limit": 20000
  },
  "contact_dialog": {
    "response_number": "",
    "response_email": "",
    "contact_types": [
      { "name": "phone",    "text": "Телефон",   "on_select_text": "Введите Ваш номер телефона",     "on_end_text": "Вам поступит звонок с номера<br> {{PHONE}}" },
      { "name": "whatsapp", "text": "WhatsApp",  "on_select_text": "Введите Ваш номер WhatsApp",     "on_end_text": "Вам поступит звонок с номера {{PHONE}}" },
      { "name": "telegram", "text": "Telegram",  "on_select_text": "Введите Ваш номер Телеграм",     "on_end_text": "Вам поступит звонок с номера {{PHONE}}" },
      { "name": "viber",    "text": "Viber",     "on_select_text": "Введите Ваш номер Вайбер",       "on_end_text": "Вам поступит звонок с номера {{PHONE}}" },
      { "name": "email",    "text": "Эл. почта", "on_select_text": "Введите Вашу электронную почту", "on_end_text": "Вам будет отправлено электронное письмо с адреса {{EMAIL}}" }
    ],
    "steps": [
      { "text": "На данный момент все операторы заняты, выберите как мы можем с Вами связаться", "wait_input": true, "wait_time": 0, "info": "Выберите как с Вами связаться" },
      { "text": "{{on_select_text}}", "wait_input": true, "wait_time": 500, "info": "{{on_select_text}}" },
      { "text": "Как к Вам обращаться?", "wait_input": true, "wait_time": 500, "info": "Напишите Ваше имя" },
      { "text": "{{on_end_text}}", "wait_input": false, "wait_time": 500, "info": null }
    ]
  },
  "win_settings": {
    "order_call": {
      "handle": "order_call",
      "show": {
        "initial": 0,
        "on_exit": 0,
        "no_action": 0
      },
      "text": {
        "h1": "У Вас остались вопросы?",
        "h2": "Закажите бесплатный обратный звонок",
        "phone_button": "Жду звонка!",
        "phone_error": "Проверьте, что Вы ввели правильный номер!",
        "feedback": "Мы перезвоним Вам в ближайшее время на номер {{PHONE}}"
      }
    },
    "promo": [],
    "ses_count": 1,
    "glob_count": 3
  },
  "telephony_backcall": {
    "internals": [],
    "strict": true
  },
  "mount_point": "#chat-widget"
}
```

