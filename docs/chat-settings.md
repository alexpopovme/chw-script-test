# Настройки Чата

Настройки чата устанавливаются в разделе `chat_settings` настроек виджета.

## visible

Видимость чата при открытии страницы.
`false` - чат не виден. `true` - чат будет открыт сразу.

```json
{
  "chat_settings": {
    "visible": false
  }  
}
```

## show_on_message

Открывать чат при поступлении нового сообщения.  

```json
{
  "chat_settings": {
    "show_on_message": true
  }  
}
```

## keep_visible

Если у пользователя открыт чат и он переходит на другую страницу, сразу открывать там чат.  

```json
{
  "chat_settings": {
    "keep_visible": true
  }  
}
```

## initial_show_delay

Открывать чат через некоторое время после открытия страницы.  
`0` - не открывать чат.

```json
{
  "chat_settings": {
    "initial_show_delay": 0
  }  
}
```

## buttons

Кнопки быстрого запроса в чат. Например "Узнать статус заказа". После нажатия кнопки будут скрыты и появятся только при следующем открытии страницы.

```json
{
  "chat_settings": {
    "buttons": []
  }  
}
```
Кнопки добавляются в массив через запятую таком виде:  
`{"text": "Узнать статус заказа", "command": "get_order_status"}`  
`text` - текст кнопки  
`command` - название команды для сервера

```json
 {
  "chat_settings": {
    "buttons": [
      {"text": "Хочу в отпуск!", "command": "get_tours_list"},
      {"text": "Узнать статус заказа", "command": "get_order_status"}
    ]
  }  
}
```

## logo

Добавление изображения в шапку чата. Например логотип или аватарка.

```json
 {
  "chat_settings": {
    "logo": {
      "src": "",
      "width": "0",
      "height": "0"
    }
  }  
}
```
`src` - полный url изображения. Например `https://mydomain.net/my-image.png`  
`width` и `height` - размеры изображения. Например `"40px"`
 
## text

Настройки основного текста в чате

```json
 {
  "chat_settings": {
    "text": {
      "header": "Всегда рады ответить на Ваши вопросы!",
      "welcome_message": "Здравствуйте!",
      "welcome_message_popup": "Здравствуйте! Как мы можем Вам помочь?",
      "input_placeholder": "Напишите что-нибудь",
      "waiting_message": "Ищем свободного менеджера, пожалуйста ожидайте"
    }
  }  
}
```

`header` - текст в шапке сайта  
`welcome_message` - сообщение чата при первом открытии  
`welcome_message_popup` - попап сообщение кнопки чата  
`input_placeholder` - текст в поле ввода сообщения  
`waiting_message` - сообщение в чате под спиннером  

## toggle_button_visible

Видимость кнопки открытия/закрытия чата

```json
 {
  "chat_settings": {
    "toggle_button_visible": {
      "initial": true,
      "initial_delay": 0,
      "show_with_chat": false,
      "hide_with_chat": false
    }
  }  
}
```

`initial` - видимость кнопки при открытии страницы. `true` - сразу видна, `false` - не видна.  
`initial_delay` - Если `"initial": true` устанавливает время в миллисекундах через которое появится кнопка после открытия страницы.  
`show_with_chat` - Если `"initial": false`, а чат будет открыватся программно, то показать кнопку вместе с открытием чата.   
`hide_with_chat` - Скрывать кнопку вместе с закрытием чата. 

Например показать кнопку через 10сек после открытия страницы  

```json
 {
  "chat_settings": {
    "toggle_button_visible": {
      "initial_delay": 10000
    }
  }  
}
```

## toggle_button_animation_delay

Время (ms) через которое начинается анимация привлечения внимания к кнопке чата  
От этого времени также отсчитывается появление попапа кнопки чата и доп. анимаций

```json
 {
  "chat_settings": {
    "toggle_button_animation_delay": 3000
  }  
}
```

## no_answer_limit

Время через которое начинать автоматический диалог получения контактов пользователя.  
Время отсчитывается от сообщения пользователя до получения ответа.   
Диалог будет запущен только если пользователь впервые открыл чат, отправил сообщения и не получил ответа.   
По умолчанию `20000` 20сек.  
Чтобы не показывать диалог установите `0`.

```json
 {
  "chat_settings": {
    "no_answer_limit": 20000
  }  
}
```

## history_limit

Количество сообщений из истории переписки загружаемых в одной партии

```json
 {
  "chat_settings": {
    "history_limit": 20
  }  
}
```
## robot_name

Имя для отправителя сообщений с ролью `ROBOT`  
По умолчанию `Автоответчик`

```json
 {
  "chat_settings": {
    "robot_name": "Автоответчик"
  }  
}
```

## system_name

Имя для отправителя сообщений с ролью `SYSTEM`  
По умолчанию `Системный автоответчик`

```json
 {
  "chat_settings": {
    "system_name": "Системный автоответчик"
  }  
}
```
